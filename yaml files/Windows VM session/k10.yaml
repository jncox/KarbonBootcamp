---
# Source: k10/charts/prometheus/templates/networkpolicies/server.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: prometheus-server
  namespace: kasten-io
  labels:
    component: "server"
    app: prometheus
    release: k10
    chart: prometheus-11.12.0
    heritage: Helm
spec:
  podSelector:
    matchLabels:
      component: "server"
      app: prometheus
      release: k10
  ingress:
    - ports:
      - port: 9090
---
# Source: k10/templates/networkpolicy.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector: {}
  policyTypes:
  - Ingress
---
# Source: k10/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: cross-services-allow
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector:
    matchLabels:
      release: k10
  ingress:
    - from:
      - podSelector:
          matchLabels:
            release: k10
      ports:
        - protocol: TCP
          port: 8000
---
# Source: k10/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: logging-allow-internal
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector:
    matchLabels:
      release: k10
      run: logging-svc
  ingress:
    - from:
      - podSelector:
          matchLabels:
            release: k10
      ports:
        # Logging input port
        - protocol: TCP
          port: 24224
        - protocol: TCP
          port: 24225
---
# Source: k10/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: allow-external
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector:
    matchLabels:
      service: gateway
      release: k10
  ingress:
  - from: []
    ports:
    - protocol: TCP
      port: 8000
---
# Source: k10/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: allow-all-api
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector:
    matchLabels:
      run: aggregatedapis-svc
      release: k10
  ingress:
  - from:
    ports:
    - protocol: TCP
      port: 10250
---
# Source: k10/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: allow-gateway-admin
  namespace: kasten-io
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  podSelector:
    matchLabels:
      release: k10
      service: gateway
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: prometheus
          component: server
          release: k10
    ports:
    - protocol: TCP
      port: 8877
---
# Source: k10/charts/prometheus/templates/rbac/server-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "server"
    app: prometheus
    release: k10
    chart: prometheus-11.12.0
    heritage: Helm
  name: prometheus-server
  namespace: kasten-io
  annotations:
    {}
---
# Source: k10/templates/serviceaccount.yaml
kind: ServiceAccount
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-k10
  namespace: kasten-io
---
# Source: k10/templates/kopia-tls-certs.yaml
# alternate names of the services. This renders to: [ component-svc.namespace, component-svc.namespace.svc ]
# generate ca cert with 365 days of validity
# generate cert with CN="component-svc", SAN=$altNames and with 365 days of validity
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: kopia-tls-cert
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaRENDQWt5Z0F3SUJBZ0lRWEplOUxvL2VlL3pKZUxtM0I2UmVoekFOQmdrcWhraUc5dzBCQVFzRkFEQWMKTVJvd0dBWURWUVFERXhGa1lYUmhMVzF2ZG1WeUxYTjJZeTFqWVRBZUZ3MHlNVEF4TWpJeU1USTJOREZhRncweQpNakF4TWpJeU1USTJOREZhTUJreEZ6QVZCZ05WQkFNVERtUmhkR0V0Ylc5MlpYSXRjM1pqTUlJQklqQU5CZ2txCmhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBdEpqL1NTdmd0d3I4Q28xN1lVMkhqbkEyWk1Lc1l2M3cKMUp3L3ZJR2owQmRhckxVdVJKazN6MkRNMEdpa3pUR3MxbnVFZmZWZVdqeGtoNEpVZW5nWkdWQWtzQ0xPMXJsTQpaMVpsemRHanZNNm5ZWG5YUTh6OVF3ajdoZXNXMFViZXNwRDJNTFM0Uzl5RWc5bFoyY294UzNXM1daYUVGL2sxClFUMjlNMzExY1dmZFE5SGtMNis3ZzZ6Ui9ZdEFKRlVFRjdYN3Z4amlXTk0xaEpyRHJPcGxmNjBqUkNwUThRbjcKM3dvZ0hEc2U0QUJjdE5EeUI3bGMwdG8rcUhZaGpjSFBwTnZ1UVd3b0xWb3NXYmFoMFB0czE2OEZTVnJXR1R0WQpHUVJlYS9Zd24zOEJxT3Q0U2p2VzlDVmhPdWlvS2JCRDRyaUN5b1V6OUJQcnIra0xldmNqVXdJREFRQUJvNEdrCk1JR2hNQTRHQTFVZER3RUIvd1FFQXdJRm9EQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JSV0pQbjMrMmMzaXRVbGJ6em42NTBQU05oZgp4REJCQmdOVkhSRUVPakE0Z2hoa1lYUmhMVzF2ZG1WeUxYTjJZeTVyWVhOMFpXNHRhVytDSEdSaGRHRXRiVzkyClpYSXRjM1pqTG10aGMzUmxiaTFwYnk1emRtTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBSkUxTTIwUWE2MS8KTHFxcDF4S29zWTBjYTRUTE1LRUwxaVFZRVlMYVUxdTYwK3EyZHpwTC93L3gzTXNVQlg1SHk1Tkxqdk1HeVFWRwp6QWhwWnJPT1plTkV4SDRsSlpWRzZ3MGcxem9aYk1yVEp0aXRIUmRxT3l5OVJldUhScy80UFdrWk9VNm9HWEV6Clc3K09mM2d0Yy8yQlduYlhVUXJIeXUzMlJtQjdLc2FtdUJ0clo5WXN4d0g5czBwWGYvWDJwSWFrd2RyZlVzYjAKMngvUGJkMHhHU2x6b2xpc2dHMWN3bmdRbGF2T1M3U0dWaFU0SThYbkhQMTZUaVVkc2ZvVU0rR0J4U290MmF2bgpOdWM3eDZMR1p4dzAyUlJ6Z3hIdEwzdzRicEtyWVlYdWxQNWhBSmwvUW9sdHdoWHpqek4zaXJJWEY0cjlIWkh0CkZNS0lSa3pUdnM4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
---
# Source: k10/templates/kopia-tls-certs.yaml
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: kopia-tls-key
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
data:
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBdEpqL1NTdmd0d3I4Q28xN1lVMkhqbkEyWk1Lc1l2M3cxSncvdklHajBCZGFyTFV1ClJKazN6MkRNMEdpa3pUR3MxbnVFZmZWZVdqeGtoNEpVZW5nWkdWQWtzQ0xPMXJsTVoxWmx6ZEdqdk02bllYblgKUTh6OVF3ajdoZXNXMFViZXNwRDJNTFM0Uzl5RWc5bFoyY294UzNXM1daYUVGL2sxUVQyOU0zMTFjV2ZkUTlIawpMNis3ZzZ6Ui9ZdEFKRlVFRjdYN3Z4amlXTk0xaEpyRHJPcGxmNjBqUkNwUThRbjczd29nSERzZTRBQmN0TkR5CkI3bGMwdG8rcUhZaGpjSFBwTnZ1UVd3b0xWb3NXYmFoMFB0czE2OEZTVnJXR1R0WUdRUmVhL1l3bjM4QnFPdDQKU2p2VzlDVmhPdWlvS2JCRDRyaUN5b1V6OUJQcnIra0xldmNqVXdJREFRQUJBb0lCQUhNOUtiRXNRWUVyampiQgpueGd3MjY0RlpvQVhSTjhLQVpINWZpWXdaekpTcExhT0NrOFZvZW8vYjVJUkpCQVhnWjEvUmNVR1BFWENRYmZDCmIxdVNwUmxrN1hSRFVjN3NnSmQwSnhRVmtMRGJBUzJQRE5Danpudm5FSENjMlh1RENIblRUSFU1N0Z2a0E5OEsKWTI0NHVnblh2TDU2OENGSUVUWm5TZ0xBTEovR3Y1M2FRUDhLcVpadWJ0bmpTUWZzL0RQaDR1NzNnNFQ5RUdkNwpUMzkwbUkyOEJkb2VrTE84ZFB4N1hPQy8xOXVYTmVxSzJIYTdPOU5aQUoxVTI5Qzh6cjFhbXRteU5GdGRZVDNpCkdpS29NRXFHMnVoNVF2aERmVXBwWmw1VVVqMUtwaXVHZWtUYWdKdVZsaWdmdXhPUVNEM3NERjlGOEpqV2hwUGMKaXRRNW5Ka0NnWUVBMTZlU1NTZ1RXWGRMTFVXN0JaSkl1aWFoQk5CRitTM3BxWEIvS082RXRUa1RmT2V3QmRXTwo3UHlINHphWTlsYnJ4TlJtdmlZcUdiNHJZK0JTelpYZFExUDJmQktybW5nLzcwNUhwK1RLK2hXcWNvb1FBVUZQCjlmSnhSMWJXQmtYbzNac0FZT3c5dWtCQnptTDdzdUI2czB2VU0yR0VFaTdUVmNLR25aclhicjBDZ1lFQTFtSnUKT1A4T0VGRnJ3UzU4ZkV3S2cwV0JMWFdGY0ZGU1p1a3R2S0Rhak53MWc5SjdTdFI4djlsVWptQUV2OXBtVFRIQwpxUGM4OWFhbmNwdXZuMVB6dFZ4SHhyNnRYam1EeFg1elZDQkxZOHhqRWV2L1dXRWdhdStSVGRMZC9Mdm9FRXJ2ClJncmY2dDlISG15ZFJBT3FXcS96dEVyZ3hobkNyNVkwclpqS3cwOENnWUFDWkdwOEEwVExya1lZTjNqT3BBUEkKaE5zdWFYME5PWlFvL0FWOUY4QkRIbUgzOWIzL0lwSldVS3JWTzJyUStML2V6QmhqclpxejlHY1kwWWs1bkpyNgp2eml4d2FkRHJHZlJLTVlrdDZZRXhpN0EzSVUyN2xtTHVlZkZ5ZEhQK2dDT1RNVGhUbDJVN2xlTWlZNlBPbXhDCkJ1cFFzNWs2ZG1pRHdBZXNRZVozNVFLQmdEYjB4SXlYMVdNWmZDWHBaTC80UGptb2Q1VFBxNFUvVTRCT0JndDAKc0pHcllZeUpTRkhHWnJSSFlnV2RWNXBXd2lMSHZyN1JvaTdXcWRZWFVzM2xGM1JHVTUvL0FUSkdUQ0UwYVJ3SApxMHZKK1J0L0E5WkZyNm01LytXVFNKU2hGcndXZVgvYkNjdUxzUTk3aUZVSEc0UmoxblZCUEoyTHZQeUY1THNiCmo5N0JBb0dBV2FFTy9XM3dMZ0tiNytRWkJOdHV6WVFTdXpqK3Z2Z3VaaWpsZkRYRS8wMjk5OEpVekZXdE55ZFcKNzFFQ215aFNLUFhUUlB1cU54aUcxbFY2Zkg2NkNDejI5TXl2VnV2N2FWS1ZoTEFPOHVtcGNYc29mWXZ1Unh2RAo2aU1YeHVFTzlYMFpGQ0ltaDBmRjRtdFZ6KzEyRVlwTWV0MTJhekxJRWJjOTVrTVNPTGc9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
# Source: k10/templates/license.yaml
apiVersion: v1
kind: Secret
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-trial-license
type: Opaque
data:
  license: Y3VzdG9tZXJOYW1lOiB0cmlhbHN0YXJ0ZXItbGljZW5zZQpkYXRlRW5kOiAnMjEwMC0wMS0wMVQwMDowMDowMC4wMDBaJwpkYXRlU3RhcnQ6ICcyMDIwLTAxLTAxVDAwOjAwOjAwLjAwMFonCmZlYXR1cmVzOgogIHRyaWFsOiBudWxsCmlkOiB0cmlhbC0wOWY4MzE5Zi0xODBmLTRhOTAtOTE3My1kOTJiNzZmMTgzNWUKcHJvZHVjdDogSzEwCnJlc3RyaWN0aW9uczoKICBub2RlczogNTAwCnNlcnZpY2VBY2NvdW50S2V5OiBudWxsCnZlcnNpb246IHYxLjAuMApzaWduYXR1cmU6IEYxbnVLUFV5STJtbDJGMmV1VHdGOXNZRTZMVU5rQ3ZiR2tTV1ZkT0ZqdERCb1B6SjUyVWFsVkFmRjVmQUxpcm5BcVhkcERnYi9YcnpxSEYrTE0xS2pEMVdXUFd0ZUdXNFc1anBPSFN0T296Y0c5M0pUUHF5M2l6TVk3RmczZVFLYTZzWDhBdnFwOXArWXVBMWNwTENlQ2dsR2dnOTVzSUFmYmRMMTBmV2d2RmR6QUt4dUZLN2psRzVtbG1CRVF5R0hrYWdoZFIrVGxzeUNTNEFkbXVBOEZodVUwZnRBdXN0b1M3R2JKd1BuTFI3STFZY1Q4OW8wU2xRZEJ2Yjg2QzdKbm1OdnY0aHhiSUo5TTJvWGJPSnQ4ZnBNcjhNWFR6YWRMTWJzSndhZ3VBVHlNUWF2cExHNXRPb0U2ZE1uMVlFVDZLdWZiYy9NdThVRDVYYXlDYTdkZz09Cg==
---
# Source: k10/templates/license.yaml
apiVersion: v1
kind: Secret
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-license
type: Opaque
data:
  license: Y3VzdG9tZXJOYW1lOiBzdGFydGVyLWxpY2Vuc2UKZGF0ZUVuZDogJzIxMDAtMDEtMDFUMDA6MDA6MDAuMDAwWicKZGF0ZVN0YXJ0OiAnMjAyMC0wMS0wMVQwMDowMDowMC4wMDBaJwpmZWF0dXJlczogbnVsbAppZDogc3RhcnRlci00ZjE4NDJjMC0wNzQ1LTQxYTUtYWFhNy1hMDFkNzQ4YjFjMzAKcHJvZHVjdDogSzEwCnJlc3RyaWN0aW9uczoKICBub2RlczogJzEwJwpzZXJ2aWNlQWNjb3VudEtleTogbnVsbAp2ZXJzaW9uOiB2MS4wLjAKc2lnbmF0dXJlOiBqT1N5NDNQZG5ZMFVCZitValhOdU1oUEFSb1J2ZkpzWElQWnhBWFNCaGpKbUwxNlNodi8vVzgyV2NMeGZJM25NZTA0TThtRU03eThPcnArQks1ekxpeFd3clpncmZSbTBEaWlELyttRjR5U3l1Rko0QW1neHV6NDhQTmdnU1VyWUM3S1FVcFYxSEJZV1ZaNm9udEJDeE1rVWtkaDVqdzZJdWMzN3lDaktIYy92bWZaenBzTVhybmxUdGhha2RjVVk0azNyVHJDa3VDcnFUMkpjM1o1amFGalZSZW1Zd1NBVXpkRldNazdQdkp3eHVFdE5rNitPV0pCVERQbnNYdldKdjdNc3NneDBJTmdtNUlJWDRVeEVhQWI4QXpTNkMyQ21XQzlhWURFTDg1aEFpeWhONXUwU0tQczA3ZXB0R1VHYmc3cWtPUVN0d0NhcDFKUURvbDVDT0E9PQo=
---
# Source: k10/templates/deployments.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-k10-metering-config
data:
  config: |
    metrics:
    - name: node_time
      type: int
      passthrough: {}
      endpoints:
      - name: on_disk
    endpoints:
    - name: on_disk
      disk:
        reportDir: /var/reports/ubbagent/reports
        expireSeconds: 3600
---
# Source: k10/templates/fluentbit-configmap.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: fluentbit-configmap
data:
  fluentbit.conf: |
    [SERVICE]
        HTTP_Server On
        HTTP_Listen 0.0.0.0
        HTTP_PORT 24225

    [INPUT]
        Name tcp
        Listen 0.0.0.0
        Port 24224

    [OUTPUT]
        Name stdout
        Match *

    [OUTPUT]
        Name file
        Match *
        Path /mnt/k10state/k10.log
  logrotate.conf: |
    /mnt/k10state/k10.log {
      create
      missingok
      rotate 6
      size 1G
    }
---
# Source: k10/templates/k10-config.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-config
data:
  loglevel: "info"
  version: 3.0.6
  modelstoredirname: "//mnt/k10state/kasten-io/"
  apiDomain: kio.kasten.io
  concurrentSnapConversions: "3"
  concurrentWorkloadSnapshots: "5"
  k10DataStoreParallelUpload: "8"
  k10DataStoreGeneralContentCacheSizeMB: "0"
  k10DataStoreGeneralMetadataCacheSizeMB: "500"
  k10DataStoreRestoreContentCacheSizeMB: "500"
  k10DataStoreRestoreMetadataCacheSizeMB: "500"
  K10BackupBufferFileHeadroomFactor: "1.1"
  KanisterBackupTimeout: "45"
  KanisterRestoreTimeout: "600"
  K10MutatingWebhookTLSCertDir: "/etc/ssl/certs/webhook"
  kanisterFunctionVersion: "v1.0.0-alpha"
---
# Source: k10/templates/k10-eula.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-eula
data:
  text: "KASTEN END USER LICENSE AGREEMENT\r\n\r\nThis End User License Agreement is a binding agreement between Kasten, Inc., a\r\nDelaware Corporation (\"Kasten\"), and you (\"Licensee\"), and establishes the terms\r\nunder which Licensee may use the Software and Documentation (as defined below),\r\nincluding without limitation terms and conditions relating to license grant,\r\nintellectual property rights, disclaimers /exclusions / limitations of warranty,\r\nindemnity and liability, governing law and limitation periods. All components\r\ncollectively are referred to herein as the \"Agreement.\"\r\n\r\nLICENSEE ACKNOWLEDGES IT HAS HAD THE OPPORTUNITY TO REVIEW THE AGREEMENT, PRIOR\r\nTO ACCEPTANCE OF THIS AGREEMENT. LICENSEE'S ACCEPTANCE OF THIS AGREEMENT IS\r\nEVIDENCED BY LICENSEE'S DOWNLOADING, COPYING, INSTALLING  OR USING THE KASTEN\r\nSOFTWARE. IF YOU ARE ACTING ON BEHALF OF A COMPANY, YOU REPRESENT THAT YOU ARE\r\nAUTHORIZED TO BIND THE COMPANY. IF YOU DO NOT AGREE TO ALL TERMS OF THIS\r\nAGREEMENT, DO NOT DOWNLOAD, COPY, INSTALL, OR USE THE SOFTWARE, AND PERMANENTLY\r\nDELETE THE SOFTWARE.\r\n\r\n1. DEFINITIONS\r\n\r\n1.1 \"Authorized Persons\" means trained technical employees and contractors of\r\nLicensee who are subject to a written agreement with Licensee that includes use\r\nand confidentiality restrictions that are at least as protective as those set\r\nforth in this Agreement.\r\n\r\n1.2 \"Authorized Reseller\" means a distributor or reseller, including cloud\r\ncomputing platform providers, authorized by Kasten to resell licenses to the\r\nSoftware through the channel through or in the territory in which Licensee is\r\npurchasing.\r\n\r\n1.3 \"Confidential Information\" means all non-public information disclosed in\r\nwritten, oral or visual form by either party to the other.  Confidential\r\nInformation may include, but is not limited to, services, pricing information,\r\ncomputer programs, source code, names and expertise of employees and\r\nconsultants, know-how, and other technical, business, financial and product\r\ndevelopment information.  \"Confidential Information\" does not include any\r\ninformation that the receiving party can demonstrate by its written records (1)\r\nwas rightfully known to it without obligation of confidentiality prior to its\r\ndisclosure hereunder by the disclosing party; (2) is or becomes publicly known\r\nthrough no wrongful act of the receiving party; (3) has been rightfully received\r\nwithout obligation of confidentiality from a third party authorized to make such\r\na disclosure; or (4) is independently developed by the receiving party without\r\nreference to confidential information disclosed hereunder.\r\n\r\n1.4 \"Documentation\" means any administration guides, installation and user\r\nguides, and release notes that are provided by Kasten to Licensee with the\r\nSoftware.\r\n\r\n1.5  \"Intellectual Property Rights\" means patents, design patents, copyrights,\r\ntrademarks, Confidential Information, know-how, trade secrets, moral rights, and\r\nany other intellectual property rights recognized in any country or jurisdiction\r\nin the world.\r\n\r\n1.6 \"Node\" means a single physical or virtual computing machine recognizable by\r\nthe Software as a unique device. Nodes must be owned or leased by Licensee or an\r\nentity controlled by, controlling or under common control with Licensee.\r\n\r\n1.7 \"Edition\" means a unique identifier for each distinct product that is made\r\navailable by Kasten and that can be licensed, including summary information\r\nregarding any associated functionality, features, or restrictions specific to\r\nthe Edition.\r\n\r\n1.8 \"Open Source Software\" means software delivered to Licensee hereunder that\r\nis subject to the provisions of any open source license agreement.\r\n\r\n1.9 \"Purchase Agreement\" means a separate commercial agreement, if applicable,\r\nbetween Kasten and the Licensee that contains the terms for the licensing of a\r\nspecific Edition of the Software.\r\n\r\n1.10 \"Software\" means any and all software product Editions licensed to Licensee\r\nunder this Agreement, all as developed by Kasten and delivered to Licensee\r\nhereunder. Software also includes any Updates provided by Kasten to Licensee.\r\nFor the avoidance of doubt, the definition of Software shall exclude any\r\nThird-Party Software and Open Source Software.\r\n\r\n1.11 \"Third-Party Software\" means certain software Kasten licenses from third\r\nparties and provides to Licensee with the Software, which may include Open\r\nSource Software.\r\n\r\n1.12 \"Update\" means a revision of the Software that Kasten makes available to\r\ncustomers at no additional cost. The Update includes, if and when applicable and\r\navailable, bug fix patches, maintenance release, minor release, or new major\r\nreleases. Updates are limited only to the Software licensed by Licensee, and\r\nspecifically exclude new product offerings, features, options or functionality\r\nof the Software that Kasten may choose to license separately, or for an\r\nadditional fee.\r\n\r\n1.13 \"Use\" means to install activate the processing capabilities of the\r\nSoftware, load, execute, access, employ the Software, or display information\r\nresulting from such capabilities.\r\n\r\n\r\n2. LICENSE GRANT AND RESTRICTIONS\r\n\r\n2.1 Enterprise License.  Subject to Licensee\"s compliance with the terms and\r\nconditions of this Agreement (including any additional restrictions on\r\nLicensee\"s use of the Software set forth in the Purchase Agreement, if one\r\nexists, between Licensee and Kasten), Kasten grants to Licensee a non-exclusive,\r\nnon-transferable (except in connection with a permitted assignment of this\r\nAgreement under Section 14.10 (Assignment), non-sublicensable, limited term\r\nlicense to install and use the Software, in object code form only, solely for\r\nLicensee\"s use, unless terminated in accordance with Section 4 (Term and\r\nTermination).\r\n\r\n2.2 Starter License.  This section shall only apply when the Licensee licenses\r\nStarter Edition of the Software. The license granted herein is for a maximum of\r\n10 Nodes and for a period of 12 months from the date of the Software release that\r\nembeds the specific license instance. Updating to a newer Software (minor or\r\nmajor) release will always extend the validity of the license by 12 months. If\r\nthe Licensee wishes to upgrade to an Enterprise License instead, the Licensee\r\nwill have to enter into a Purchase Agreement with Kasten which will supersede\r\nthis Agreement. The Licensee is required to provide accurate email and company\r\ninformation, if representing a company, when accepting this Agreement. Under no\r\ncircumstances will a Starter License be construed to mean that the Licensee is\r\nauthorized to distribute the Software to any third party for any reason\r\nwhatsoever.\r\n\r\n2.3 Evaluation License.  This section shall only apply when the Licensee has\r\nlicensed the Software for an initial evaluation period. The license granted\r\nherein is valid only one time 30 days, starting from date of installation,\r\nunless otherwise explicitly designated by Kasten (\"Evaluation Period\"). Under\r\nthis license the Software can only be used for evaluation purposes. Under no\r\ncircumstances will an Evaluation License be construed to mean that the Licensee\r\nis authorized to distribute the Software to any third party for any reason\r\nwhatsoever. If the Licensee wishes to upgrade to an Enterprise License instead,\r\nthe Licensee will have to enter into a Purchase Agreement with Kasten which will\r\nsupersede this Agreement.. If the Licensee does not wish to upgrade to an\r\nEnterprise License   at the end of the Evaluation Period the Licensee\"s rights\r\nunder the Agreement shall terminate, and the Licensee shall delete all Kasten\r\nSoftware.\r\n\r\n2.4 License Restrictions.  Except to the extent permitted under this Agreement,\r\nLicensee will not nor will Licensee allow any third party to:  (i) copy, modify,\r\nadapt, translate or otherwise create derivative works of the Software or the\r\nDocumentation; (ii) reverse engineer, decompile, disassemble or otherwise\r\nattempt to discover the source code of the Software; (iii) rent, lease, sell,\r\nassign or otherwise transfer rights in or to the Software or Documentation; (iv)\r\nremove any proprietary notices or labels from the Software or Documentation; (v)\r\npublicly disseminate performance information or analysis (including, without\r\nlimitation, benchmarks) relating to the Software. Licensee will comply with all\r\napplicable laws and regulations in Licensee\"s use of and access to the Software\r\nand Documentation.\r\n\r\n2.5 Responsibility for Use.  The Software and Documentation may be used only by\r\nAuthorized Persons and in conformance with this Agreement.  Licensee shall be\r\nresponsible for the proper use and protection of the Software and Documentation\r\nand is responsible for: (i) installing, managing, operating, and physically\r\ncontrolling the Software and the results obtained from using the Software; (ii)\r\nusing the Software within the operating environment specified in the\r\nDocumentation; and; (iii) establishing and maintaining such recovery and data\r\nprotection and security procedures as necessary for Licensee's service and\r\noperation and/or as may be specified by Kasten from time to time.\r\n\r\n2.6 United States Government Users.  The Software licensed under this Agreement\r\nis \"commercial computer software\" as that term is described in DFAR\r\n252.227-7014(a)(1). If acquired by or on behalf of a civilian agency, the U.S.\r\nGovernment acquires this commercial computer software and/or commercial computer\r\nsoftware documentation subject to the terms and this Agreement as specified in\r\n48 C.F.R. 12.212 (Computer Software) and 12.211 (Technical Data) of the Federal\r\nAcquisition Regulations (\"FAR\") and its successors. If acquired by or on behalf\r\nof any agency within the Department of Defense (\"DOD\"), the U.S. Government\r\nacquires this commercial computer software and/or commercial computer software\r\ndocumentation subject to the terms of this Agreement as specified in 48 C.F.R.\r\n227.7202 of the DOD FAR Supplement and its successors.\r\n\r\n\r\n3. SUPPORT\r\n\r\nDuring the Term (as defined below) and subject to Licensee\"s compliance with the\r\nterms and conditions of this Agreement, Licensee may submit queries and requests\r\nfor support using Kasten\"s support alias support@kasten.io and a private Slack\r\nchannel (except Starter and Evaluation Edition Licensees). Licensee shall be\r\nentitled to the support service-level agreement specified in the Purchase\r\nAgreement (including relevant Order Forms) between the Licensee and Kasten. If\r\nthere is no Purchase Agreement in place, support level shall default to Starter\r\nEdition Support as specified below. Licensee shall also be permitted to download\r\nand install all Updates released by Kasten during the Term and made generally\r\navailable to users of the Software.  Support is provided only for the current\r\nversion of the Software (i.e. with all Updates and Upgrades installed) and for\r\neach of the previous three Updates.\r\n\r\n3.1 Starter Edition Support.  If the Licensee has licensed Starter Edition of\r\nthe Software, they will have access to the Kasten support alias, but Kasten\r\ncannot guarantee a service level of any sort. Should a higher level of support\r\nbe needed, Licensee has the option to consider entering into a Purchase\r\nAgreement with Kasten for licensing a different Edition of the Software.\r\n\r\n\r\n4. TERM AND TERMINATION\r\n\r\n4.1 Term. The term of this Agreement, except for Starter and Evaluation\r\nLicenses, shall commence on the Effective Date and shall, unless terminated\r\nearlier in accordance with the provisions of Section 4.2 below, remain in force\r\nfor the Subscription Period as set forth in the applicable Order Form(s) (the\r\n\"Term\"). The parties may extend the Term of this Agreement beyond the\r\nSubscription Period by executing additional Order Form(s) and Licensee\"s payment\r\nof additional licensing fees. The term of this Agreement for the Starter and\r\nEvaluation Licenses will coincide with the term for Starter Edition (as stated\r\nin section 2.2) and the term for Evaluation Period (as stated in section 2.3),\r\nrespectively\r\n\r\n4.2 Termination.  Either party may immediately terminate this\r\nAgreement and the licenses granted hereunder if the other party (1) becomes\r\ninsolvent and\"becomes unwilling or unable to meet its obligations under this\r\nAgreement, (2) files a petition in bankruptcy, (3) is subject to the filing of\r\nan involuntary petition for bankruptcy which is not rescinded within a period of\r\nforty-five (45) days, (4) fails to cure a material breach of any material term\r\nor condition of this Agreement within thirty (30) days of receipt of written\r\nnotice specifying such breach, or (5) materially breaches its obligations of\r\nconfidentiality hereunder.\r\n\r\n4.3 Effects of Termination. Upon expiration or\r\ntermination of this Agreement for any reason, (i) any amounts owed to Kasten\r\nunder this Agreement will be immediately due and payable; (ii) all licensed\r\nrights granted in this Agreement will immediately cease; and (iii) Licensee will\r\npromptly discontinue all use of the Software and Documentation and return to\r\nKasten any Kasten Confidential Information in Licensee\"s possession or control.\r\n\r\n4.4 Survival.  The following Sections of this Agreement will remain in effect\r\nfollowing the expiration or termination of these General Terms for any reason:\r\n4.3 (Effects of Termination), 4.4 (Survival), 5 (Third Party Software) 5\r\n(Confidentiality), 9 (Ownership), 10.2 (Third-Party Software), 10.3 (Warranty\r\nDisclaimer), 11 (Limitations of Liability), 12.2 (Exceptions to Kasten\r\nObligation), 13 (Export) and 14 (General).\r\n\r\n\r\n5. THIRD PARTY AND OPEN SOURCE SOFTWARE Certain Third-Party Software or Open\r\nSource Software (Kasten can provide a list upon request) that may be provided\r\nwith the Software may be subject to various other terms and conditions imposed\r\nby the licensors of such Third-Party Software or Open Source Software.  The\r\nterms of Licensee\"s use of the Third-Party Software or Open Source Software is\r\nsubject to and governed by the respective Third-Party Software and Open Source\r\nlicenses, except that this Section 5 (Third-Party Software), Section 10.2 (Third\r\nParty Software), 10.3 (Warranty Disclaimer), Section 11 (Limitations of\r\nLiability), and Section 14 (General) of this Agreement also govern Licensee\"s\r\nuse of the Third-Party Software.  To the extent applicable to Licensee\"s use of\r\nsuch Third-Party Software and Open Source, Licensee agrees to comply with the\r\nterms and conditions contained in all such Third-Party Software and Open Source\r\nlicenses.\r\n\r\n\r\n6. CONFIDENTIALITY Neither party will use any Confidential Information of the\r\nother party except as expressly permitted by this Agreement or as expressly\r\nauthorized in writing by the disclosing party.  The receiving party shall use\r\nthe same degree of care to protect the disclosing party\"s Confidential\r\nInformation as it uses to protect its own Confidential Information of like\r\nnature, but in no circumstances less than a commercially reasonable standard of\r\ncare.  The receiving party may not disclose the disclosing party\"s Confidential\r\nInformation to any person or entity other than to (i) (a) Authorized Persons in\r\nthe case the receiving party is Licensee, and (b) Kasten\"s employees and\r\ncontractors in the case the receiving party is Kasten, and (ii) who need access\r\nto such Confidential Information solely for the purpose of fulfilling that\r\nparty\"s obligations or exercising that party\"s rights hereunder.  The foregoing\r\nobligations will not restrict the receiving party from disclosing Confidential\r\nInformation of the disclosing party: (1) pursuant to the order or requirement of\r\na court, administrative agency, or other governmental body, provided that the\r\nreceiving party required to make such a disclosure gives reasonable notice to\r\nthe disclosing party prior to such disclosure; and (2) on a confidential basis\r\nto its legal and financial advisors.  Kasten may identify Licensee in its\r\ncustomer lists in online and print marketing materials.\r\n\r\n\r\n7. FEES Fees for Enterprise License shall be set forth in separate Order Form(s)\r\nattached to a Purchase Agreement, between the Licensee and Kasten.\r\n\r\nIf Licensee has obtained the Software through an Authorized Reseller, fees for\r\nlicensing shall be invoiced directly by the Authorized Reseller.\r\n\r\nIf no Purchase Agreement exists, during the term of this Agreement,  Kasten\r\nshall license the Starter Edition only and no other Edition of the Software\r\n\"at no charge\" to Licensee.\r\n\r\n\r\n8. USAGE DATA Kasten may collect, accumulate, and aggregate certain usage\r\nstatistics in order to analyze usage of the Software, make improvements, and\r\npotentially develop new products. Kasten may use aggregated anonymized data for\r\nany purpose that Kasten, at its own discretion, may consider appropriate.\r\n\r\n\r\n9. OWNERSHIP As between Kasten and Licensee, all right, title and interest in\r\nthe Software, Documentation and any other Kasten materials furnished or made\r\navailable hereunder, all modifications and enhancements thereof, and all\r\nsuggestions, ideas and feedback proposed by Licensee regarding the Software and\r\nDocumentation, including all copyright rights, patent rights and other\r\nIntellectual Property Rights in each of the foregoing, belong to and are\r\nretained solely by Kasten or Kasten\"s licensors and providers, as applicable.\r\nLicensee hereby does and will irrevocably assign to Kasten all evaluations,\r\nideas, feedback and suggestions made by Licensee to Kasten regarding the\r\nSoftware and Documentation (collectively, \"Feedback\") and all Intellectual\r\nProperty Rights in and to the Feedback.  Except as expressly provided herein, no\r\nlicenses of any kind are granted hereunder, whether by implication, estoppel, or\r\notherwise.\r\n\r\n\r\n10. LIMITED WARRANTY AND DISCLAIMERS\r\n\r\n10.1 Limited Warranty.  Kasten warrants for a period of thirty (30) days from\r\nthe Effective Date that the Software will materially conform to Kasten\"s\r\nthen-current Documentation (the \"Warranty Period\") when properly installed on a\r\ncomputer for which a license is granted hereunder. Licensee\"s exclusive remedy\r\nfor a breach of this Section 10.1 is that Kasten shall, at its option, use\r\ncommercially reasonable efforts to correct  or replace the Software, or refund\r\nall or a portion of the fees paid by Licensee pursuant to the Purchase\r\nAgreement. Kasten, in its sole discretion, may revise this limited warranty from\r\ntime to time.\r\n\r\n10.2 Third-Party Software.  Except as expressly set forth in this Agreement,\r\nThird-Party Software (including any Open Source Software) are provided on an\r\n\"as-is\" basis at the sole risk of Licensee. Notwithstanding any language to the\r\ncontrary in this Agreement, Kasten makes no express or implied warranties of any\r\nkind with respect to Third-Party Software provided to Licensee and shall not be\r\nliable for any damages regarding the use or operation of the Third-Party\r\nSoftware furnished under this Agreement.  Any and all express or implied\r\nwarranties, if any, arising from the license of Third-Party Software shall be\r\nthose warranties running from the third party manufacturer or licensor to\r\nLicensee.\r\n\r\n10.3 Warranty Disclaimer.  EXCEPT FOR THE LIMITED WARRANTY PROVIDED ABOVE,\r\nKASTEN AND ITS SUPPLIERS MAKE NO WARRANTY OF ANY KIND, WHETHER EXPRESS, IMPLIED,\r\nSTATUTORY OR OTHERWISE, RELATING TO THE SOFTWARE OR TO KASTEN\"S MAINTENANCE,\r\nPROFESSIONAL OR OTHER SERVICES.  KASTEN SPECIFICALLY DISCLAIMS ALL IMPLIED\r\nWARRANTIES OF DESIGN, MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE\r\nAND NON-INFRINGEMENT. KASTEN AND ITS SUPPLIERS AND LICENSORS DO NOT WARRANT OR\r\nREPRESENT THAT THE SOFTWARE WILL BE FREE FROM BUGS OR THAT ITS USE WILL BE\r\nUNINTERRUPTED OR ERROR-FREE. THIS DISCLAIMER SHALL APPLY NOTWITHSTANDING THE\r\nFAILURE OF THE ESSENTIAL PURPOSE OF ANY LIMITED REMEDY PROVIDED HEREIN. EXCEPT\r\nAS STATED ABOVE, KASTEN AND ITS SUPPLIERS PROVIDE THE SOFTWARE ON AN \"AS IS\"\r\nBASIS.  KASTEN  PROVIDES NO WARRANTIES WITH RESPECT TO THIRD PARTY SOFTWARE AND\r\nOPEN SOURCE SOFTWARE.\r\n\r\n\r\n11. LIMITATIONS OF LIABILITY\r\n\r\n11.1 EXCLUSION OF CERTAIN DAMAGES.  EXCEPT FOR BREACHES OF SECTION 6\r\n(CONFIDENTIALITY) OR SECTION 9 (OWNERSHIP),  IN NO EVENT WILL EITHER PARTY BE\r\nLIABLE FOR ANY INDIRECT, CONSEQUENTIAL, EXEMPLARY, SPECIAL, INCIDENTAL OR\r\nRELIANCE DAMAGES, INCLUDING ANY LOST DATA, LOSS OF USE AND LOST PROFITS, ARISING\r\nFROM OR RELATING TO THIS AGREEMENT, THE SOFTWARE OR DOCUMENTATION, EVEN IF SUCH\r\nPARTY KNEW OR SHOULD HAVE KNOWN OF THE POSSIBILITY OF, OR COULD REASONABLY HAVE\r\nPREVENTED, SUCH DAMAGES.\r\n\r\n11.2 LIMITATION OF DAMAGES.  EXCEPT FOR THE BREACHES OF SECTION 6\r\n(CONFIDENTIALITY) OR SECTION 9 (OWNERSHIP), EACH PARTY\"S TOTAL CUMULATIVE\r\nLIABILITY ARISING FROM OR RELATED TO THIS AGREEMENT OR THE SOFTWARE,\r\nDOCUMENTATION, OR SERVICES PROVIDED BY KASTEN, WILL NOT EXCEED THE AMOUNT OF\r\nFEES PAID OR PAYABLE BY LICENSEE FOR THE SOFTWARE, DOCUMENTATION OR SERVICES\r\nGIVING RISE TO THE CLAIM IN THE TWELVE (12) MONTHS FOLLOWING THE EFFECTIVE DATE.\r\nLICENSEE AGREES THAT KASTEN\"S SUPPLIERS AND LICENSORS WILL HAVE NO LIABILITY OF\r\nANY KIND UNDER OR AS A RESULT OF THIS AGREEMENT. IN THE CASE OF KASTEN\"S\r\nINDEMNIFICATION OBLIGATIONS, KASTEN\"S CUMULATIVE LIABILITY UNDER THIS AGREEMENT\r\nSHALL BE LIMITED TO THE SUM OF THE LICENSE FEES PAID OR PAYABLE BY LICENSEE FOR\r\nTHE SOFTWARE, DOCUMENTATION OR SERVICES GIVING RISE TO THE CLAIM IN THE TWELVE\r\n(12) MONTHS FOLLOWING THE EFFECTIVE DATE.\r\n\r\n11.3 THIRD PARTY SOFTWARE.  NOTWITHSTANDING ANY LANGUAGE TO THE CONTRARY IN THIS\r\nAGREEMENT, KASTEN SHALL NOT BE LIABLE FOR ANY DAMAGES REGARDING THE USE OR\r\nOPERATION OF ANY THIRD-PARTY SOFTWARE FURNISHED UNDER THIS AGREEMENT.\r\n\r\n11.4 LIMITATION OF ACTIONS.  IN NO EVENT MAY LICENSEE BRING ANY CAUSE OF ACTION\r\nRELATED TO THIS AGREEMENT MORE THAN ONE (1) YEAR AFTER THE OCCURRENCE OF THE\r\nEVENT GIVING RISE TO THE LIABILITY.\r\n\r\n\r\n12. EXPORT\r\nThe Software, Documentation and related technical data may be subject\r\nto U.S. export control laws, including without limitation the U.S. Export\r\nAdministration Act and its associated regulations, and may be subject to export\r\nor import regulations in other countries. Licensee shall comply with all such\r\nregulations and agrees to obtain all necessary licenses to export, re-export, or\r\nimport the Software, Documentation and related technical data.\r\n\r\n\r\n13. GENERAL\r\n\r\n13.1 No Agency. Kasten and Licensee each acknowledge and agree that the\r\nrelationship established by this Agreement is that of independent contractors,\r\nand nothing contained in this Agreement shall be construed to: (1) give either\r\nparty the power to direct or control the day\x1eto\x1eday activities of the other; (2)\r\ndeem the parties to be acting as partners, joint venturers, co\x1eowners or\r\notherwise as participants in a joint undertaking; or (3) permit either party or\r\nany of either party\"s officers, directors, employees, agents or representatives\r\nto create or assume any obligation on behalf of or for the account of the other\r\nparty for any purpose whatsoever.\r\n\r\n13.2 Compliance with Laws.  Each party agrees to comply with all applicable\r\nlaws, regulations, and ordinances relating to their performance hereunder.\r\nWithout limiting the foregoing, Licensee warrants and covenants that it will\r\ncomply with all then current laws and regulations of the United States and other\r\njurisdictions relating or applicable to Licensee\"s use of the Software and\r\nDocumentation including, without limitation, those concerning Intellectual\r\nProperty Rights, invasion of privacy, defamation, and the import and export of\r\nSoftware and Documentation.\r\n\r\n13.3 Force Majeure.  Except for the duty to pay money, neither party shall be\r\nliable hereunder by reason of any failure or delay in the performance of its\r\nobligations hereunder on account of strikes, riots, fires, flood, storm,\r\nexplosions, acts of God, war, governmental action, earthquakes, or any other\r\ncause which is beyond the reasonable control of such party.\r\n\r\n13.4 Governing Law; Venue and Jurisdiction.  This Agreement shall be interpreted\r\naccording to the laws of the State of California without regard to or\r\napplication of choice\x1eof\x1elaw rules or principles.  The parties expressly agree\r\nthat the United Nations Convention on Contracts for the International Sale of\r\nGoods and the Uniform Computer Information Transactions Act will not apply.  Any\r\nlegal action or proceeding arising under this Agreement will be brought\r\nexclusively in the federal or state courts located in Santa Clara County,\r\nCalifornia and the parties hereby consent to the personal jurisdiction and venue\r\ntherein.\r\n\r\n13.5 Injunctive Relief.  The parties agree that monetary damages would not be an\r\nadequate remedy for the breach of certain provisions of this Agreement,\r\nincluding, without limitation, all provisions concerning infringement,\r\nconfidentiality and nondisclosure, or limitation on permitted use of the\r\nSoftware or Documentation.  The parties further agree that, in the event of such\r\nbreach, injunctive relief would be necessary to prevent irreparable injury.\r\nAccordingly, either party shall have the right to seek injunctive relief or\r\nsimilar equitable remedies to enforce such party's rights under the pertinent\r\nprovisions of this Agreement, without limiting its right to pursue any other\r\nlegal remedies available to it.\r\n\r\n13.6 Entire Agreement and Waiver.  This Agreement and any exhibits  hereto shall\r\nconstitute the entire agreement and contains all terms and conditions between\r\nKasten and Licensee with respect to the subject matter hereof and all prior\r\nagreements, representations, and statement with respect to such subject matter\r\nare superseded hereby.  This Agreement may be changed only by written agreement\r\nsigned by both Kasten and Licensee.  No failure of either party to exercise or\r\nenforce any of its rights under this Agreement shall act as a waiver of\r\nsubsequent breaches; and the waiver of any breach shall not act as a waiver of\r\nsubsequent breaches.\r\n\r\n13.7 Severability.  In the event any provision of this Agreement is held by a\r\ncourt or other tribunal of competent jurisdiction to be unenforceable, that\r\nprovision will be enforced to the maximum extent permissible under applicable\r\nlaw and the other provisions of this Agreement will remain in full force and\r\neffect.  The parties further agree that in the event such provision is an\r\nessential part of this Agreement, they will begin negotiations for a suitable\r\nreplacement provision.\r\n\r\n13.8 Counterparts.  This Agreement may be executed in any number of\r\ncounterparts, each of which, when so executed and delivered (including by\r\nfacsimile), shall be deemed an original, and all of which shall constitute one\r\nand the same agreement.\r\n\r\n13.9 Binding Effect.  This Agreement shall be binding upon and shall inure to\r\nthe benefit of the respective parties hereto, their respective successors and\r\npermitted assigns.\r\n\r\n13.10 Assignment.  Neither party may, without the prior written consent of the\r\nother party (which shall not be unreasonably withheld), assign this Agreement,\r\nin whole or in part, either voluntarily or by operation of law, and any attempt\r\nto do so shall be a material default of this Agreement and shall be void.\r\nNotwithstanding the foregoing, Kasten  may assign its rights and benefits and\r\ndelegate its duties and obligations under this Agreement without the consent of\r\nLicensee in connection with a merger, reorganization or sale of all or\r\nsubstantially all relevant assets of the assigning party; in each case provided\r\nthat such successor assumes the assigning party\"s obligations under this\r\nAgreement.\r\n\r\n"
---
# Source: k10/templates/prometheus-configmap.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  namespace: kasten-io
  name: k10-k10-prometheus-config
data:
  prometheus.yml: |
    global:
      scrape_interval: 1m
      scrape_timeout: 10s
      evaluation_interval: 1m
    scrape_configs:
      - job_name: auth
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - auth-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: auth
      - job_name: catalog
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - catalog-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: catalog
      - job_name: crypto
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - crypto-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: crypto
      - job_name: dashboardbff
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - dashboardbff-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: dashboardbff
      - job_name: executor
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - executor-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: executor
      - job_name: jobs
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - jobs-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: jobs
      - job_name: logging
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - logging-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: logging
      - job_name: metering
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - metering-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: metering
      - job_name: state
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - state-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: state
      - job_name: gateway
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - gateway-admin.kasten-io.svc.cluster.local:8877
            labels:
              application: k10
              service: gateway
      - job_name: config
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - config-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: config
      - job_name: kanister
        metrics_path: /metrics
        scheme: http
        static_configs:
          - targets:
            - kanister-svc.kasten-io.svc.cluster.local:8000
            labels:
              application: k10
              service: kanister
      - job_name: prometheus
        metrics_path: /k10/prometheus/metrics
        static_configs:
          - targets:
              - "localhost:9090"
            labels:
              app: prometheus
              component: server
---
# Source: k10/charts/prometheus/templates/persistentvolumeclaims/server.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "server"
    app: prometheus
    release: k10
    chart: prometheus-11.12.0
    heritage: Helm
  name: prometheus-server
  namespace: kasten-io
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "8Gi"
---
# Source: k10/templates/deployments.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: kasten-io
  name: catalog-pv-claim
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: catalog
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
# Source: k10/templates/deployments.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: kasten-io
  name: jobs-pv-claim
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: jobs
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
# Source: k10/templates/deployments.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: kasten-io
  name: logging-pv-claim
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: logging
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
---
# Source: k10/templates/deployments.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: kasten-io
  name: metering-pv-claim
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: metering
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
---
# Source: k10/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-admin
rules:
- apiGroups:
  - config.kio.kasten.io
  - actions.kio.kasten.io
  - apps.kio.kasten.io
  - vault.kio.kasten.io
  resources:
  - "*"
  verbs:
  - "*"
- apiGroups:
  - cr.kanister.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - create
  - get
  - list
---
# Source: k10/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-mc-admin
rules:
- apiGroups:
  - config.kio.kasten.io
  - dist.kio.kasten.io
  resources:
  - "*"
  verbs:
  - "*"
- apiGroups:
  - ""
  resources:
  - secrets
  - configmaps
  verbs:
  - create
  - get
  - list
  - delete
---
# Source: k10/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-basic
rules:
- apiGroups:
  - actions.kio.kasten.io
  resources:
  - backupactions
  - backupactions/details
  - restoreactions
  - restoreactions/details
  - exportactions
  - exportactions/details
  - cancelactions
  verbs:
   - "*"
- apiGroups:
  - apps.kio.kasten.io
  resources:
  - restorepoints
  - restorepoints/details
  - applications
  - applications/details
  verbs:
  - "*"
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
---
# Source: k10/templates/rbac.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-config-view
rules:
- apiGroups:
  - config.kio.kasten.io
  resources:
  - profiles
  - policies
  verbs:
  - get
  - list
---
# Source: k10/templates/rbac.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: kasten-io-k10-k10-cluster-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: k10-k10
  namespace: kasten-io
---
# Source: k10/templates/rbac.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: kasten-io-k10-k10-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name:  k10-admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: k10:admins
---
# Source: k10/templates/rbac.yaml
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: k10-ns-admin
  namespace: kasten-io
rules:
- apiGroups:
  - ""
  - "apps"
  resources:
  - deployments
  - pods
  verbs:
  - get
  - list
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - get
  - list
  - update
- apiGroups:
  - "batch"
  resources:
  - jobs
  verbs:
  - get
---
# Source: k10/templates/rbac.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: kasten-io-k10-k10-ns-admin
  namespace: kasten-io
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name:  k10-ns-admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: k10:admins
---
# Source: k10/charts/prometheus/templates/services/server.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    component: "server"
    app: prometheus
    release: k10
    chart: prometheus-11.12.0
    heritage: Helm
  name: prometheus-server
  namespace: kasten-io
spec:
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 9090
  selector:
    component: "server"
    app: prometheus
    release: k10
  sessionAffinity: None
  type: "ClusterIP"
---
# Source: k10/templates/gateway.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    service: gateway
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
  name: gateway
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  AuthService
      name:  authentication
      auth_service: "auth-svc:8000"
      path_prefix: "/v0/authz"
      allowed_request_headers:
      - "x-forwarded-access-token"
      ---
      apiVersion: ambassador/v1
      kind:  Module
      name:  ambassador
      config:
        service_port: 8000
spec:
  ports:
  - name: http
    port: 8000
    targetPort: 8000
  selector:
    service: gateway
---
# Source: k10/templates/gateway.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: gateway-admin
  labels:
    service: gateway
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  ports:
  - name: metrics
    port: 8877
    targetPort: 8877
  selector:
    service: gateway
---
# Source: k10/templates/prometheus-service.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: prometheus-server-exp
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: prometheus-server
    run: prometheus-server
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  prometheus-server-mapping
      rewrite: /k10/prometheus/
      prefix: /k10/prometheus/
      service: prometheus-server:80
      timeout_ms: 15000

spec:
  ports:
  - name: http
    protocol: TCP
    port: 80
    targetPort: 9090
  selector:
    app: prometheus
    component: server
    release: k10
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: auth-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: auth
    run: auth-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  auth-mapping
      prefix: /k10/auth-svc/
      rewrite: /
      service: auth-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: auth-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: catalog-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: catalog
    run: catalog-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  catalog-mapping
      prefix: /k10/catalog-svc/
      rewrite: /
      service: catalog-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: catalog-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: crypto-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: crypto
    run: crypto-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  crypto-mapping
      prefix: /k10/crypto-svc/
      rewrite: /
      service: crypto-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: crypto-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: dashboardbff-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: dashboardbff
    run: dashboardbff-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  dashboardbff-mapping
      prefix: /k10/dashboardbff-svc/
      rewrite: /
      service: dashboardbff-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: dashboardbff-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: executor-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: executor
    run: executor-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  executor-mapping
      prefix: /k10/executor-svc/
      rewrite: /
      service: executor-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: executor-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: jobs-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: jobs
    run: jobs-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  jobs-mapping
      prefix: /k10/jobs-svc/
      rewrite: /
      service: jobs-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: jobs-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: logging-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: logging
    run: logging-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  logging-mapping
      prefix: /k10/logging-svc/
      rewrite: /
      service: logging-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  - name: logging
    protocol: TCP
    port: 24224
    targetPort: 24224
  - name: logging-metrics
    protocol: TCP
    port: 24225
    targetPort: 24225
  selector:
    run: logging-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: metering-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: metering
    run: metering-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  metering-mapping
      prefix: /k10/metering-svc/
      rewrite: /
      service: metering-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: metering-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: state-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: state
    run: state-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  state-mapping
      prefix: /k10/state-svc/
      rewrite: /
      service: state-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: state-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: frontend-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: frontend
    run: frontend-svc
  annotations:
    getambassador.io/config: |
      ---
      apiVersion: ambassador/v1
      kind:  Mapping
      name:  frontend-mapping
      prefix: /k10
      rewrite: /
      service: frontend-svc.kasten-io:8000
      timeout_ms: 30000
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: frontend-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: aggregatedapis-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: aggregatedapis
    run: aggregatedapis-svc
spec:
  ports:
  - name: http
    port: 443
    protocol: TCP
    targetPort: 10250
  selector:
    run: aggregatedapis-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: config-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: config
    run: config-svc
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: config-svc
---
# Source: k10/templates/v0services.yaml
apiVersion: v1
kind: Service
metadata:
  namespace: kasten-io
  name: kanister-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: kanister
    run: kanister-svc
spec:
  ports:
  - name: http
    protocol: TCP
    port: 8000
    targetPort: 8000
  selector:
    run: kanister-svc
---
# Source: k10/charts/prometheus/templates/deployments/server.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    component: "server"
    app: prometheus
    release: k10
    chart: prometheus-11.12.0
    heritage: Helm
  name: prometheus-server
  namespace: kasten-io
spec:
  selector:
    matchLabels:
      component: "server"
      app: prometheus
      release: k10
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 100%
      maxUnavailable: 100%
    type: RollingUpdate
    
  template:
    metadata:
      labels:
        component: "server"
        app: prometheus
        release: k10
        chart: prometheus-11.12.0
        heritage: Helm
    spec:
      serviceAccountName: prometheus-server
      containers:
        - name: prometheus-server-configmap-reload
          image: "jimmidyson/configmap-reload:v0.4.0"
          imagePullPolicy: "IfNotPresent"
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://127.0.0.1:9090/k10/prometheus//-/reload
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true

        - name: prometheus-server
          image: "prom/prometheus:v2.20.1"
          imagePullPolicy: "IfNotPresent"
          args:
            - --storage.tsdb.retention.time=30d
            - --config.file=/etc/config/prometheus.yml
            - --storage.tsdb.path=/data
            - --web.console.libraries=/etc/prometheus/console_libraries
            - --web.console.templates=/etc/prometheus/consoles
            - --web.enable-lifecycle
            - --web.external-url=/k10/prometheus/
          ports:
            - containerPort: 9090
          readinessProbe:
            httpGet:
              path: /k10/prometheus//-/ready
              port: 9090
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          livenessProbe:
            httpGet:
              path: /k10/prometheus//-/healthy
              port: 9090
            initialDelaySeconds: 30
            periodSeconds: 15
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: /data
              subPath: ""
      securityContext:
        fsGroup: 65534
        runAsGroup: 65534
        runAsNonRoot: true
        runAsUser: 65534
      terminationGracePeriodSeconds: 300
      volumes:
        - name: config-volume
          configMap:
            name: k10-k10-prometheus-config
        - name: storage-volume
          persistentVolumeClaim:
            claimName: prometheus-server
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: auth-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: auth
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: auth
      run: auth-svc
  template:
    metadata:
      annotations:
        checksum/config: a70fe99e764bba352a098511f1dc735c2d8ea27c5ec0a5d1d9f5cb4b3e21e723
        checksum/secret: 545c38b0922de19734fbffde62792c37c2aef6a3216cfa472449173165220f7d
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: auth
        run: auth-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: auth-svc        
        image: gcr.io/kasten-images/auth:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 2m
            memory: 30Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
        volumeMounts:   
      volumes:
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: catalog-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: catalog
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: catalog
      run: catalog-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: catalog
        run: catalog-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      initContainers:
      - name: upgrade-init
        securityContext:
          runAsUser: 0
          allowPrivilegeEscalation: true        
        image: gcr.io/kasten-images/upgrade:3.0.6
        imagePullPolicy: Always
        env:
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
        volumeMounts:
        - name: catalog-persistent-storage
          mountPath: "/mnt/k10state"
      - name: schema-upgrade-check        
        image: gcr.io/kasten-images/catalog:3.0.6
        imagePullPolicy: Always
        env:
          - name: INIT_CONTAINER
            value: "true"
          - name: K10_RELEASE_NAME
            value: k10
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
        volumeMounts:
        - name: catalog-persistent-storage
          mountPath: "/mnt/k10state"
      containers:
      - name: catalog-svc        
        image: gcr.io/kasten-images/catalog:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 200m
            memory: 780Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
        volumeMounts:
        - name: catalog-persistent-storage
          mountPath: "/mnt/k10state" 
      - name: kanister-sidecar
        image: ghcr.io/kanisterio/kanister-tools:0.49.0
        imagePullPolicy: Always        
        resources:
          limits:
            cpu: 1200m
            memory: 800Mi
          requests:
            cpu: 100m
            memory: 800Mi
        volumeMounts:
        - name: catalog-persistent-storage
          mountPath: "/mnt/k10state"  
      volumes:
      - name: catalog-persistent-storage
        persistentVolumeClaim:
          claimName: catalog-pv-claim
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: crypto-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: crypto
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: crypto
      run: crypto-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: crypto
        run: crypto-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: crypto-svc        
        image: gcr.io/kasten-images/crypto:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 1m
            memory: 30Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: dashboardbff-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: dashboardbff
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: dashboardbff
      run: dashboardbff-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: dashboardbff
        run: dashboardbff-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: dashboardbff-svc        
        image: gcr.io/kasten-images/dashboardbff:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 8m
            memory: 40Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
          - name: K10_PROMETHEUS_HOST
            value: prometheus-server-exp
          - name: K10_PROMETHEUS_PORT
            value: "80"
          - name: K10_PROMETHEUS_BASE_URL
            value: /k10/prometheus/
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: executor-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: executor
spec:
  replicas: 3
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: executor
      run: executor-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: executor
        run: executor-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: executor-svc        
        image: gcr.io/kasten-images/executor:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 3m
            memory: 50Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
      - name: tools        
        image: gcr.io/kasten-images/cephtool:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 1m
            memory: 2Mi
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: jobs-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: jobs
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: jobs
      run: jobs-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: jobs
        run: jobs-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      initContainers:
      - name: upgrade-init
        securityContext:
          runAsUser: 0
          allowPrivilegeEscalation: true        
        image: gcr.io/kasten-images/upgrade:3.0.6
        imagePullPolicy: Always
        env:
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
        volumeMounts:
        - name: jobs-persistent-storage
          mountPath: "/mnt/k10state"
      containers:
      - name: jobs-svc        
        image: gcr.io/kasten-images/jobs:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 30m
            memory: 380Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
        volumeMounts:
        - name: jobs-persistent-storage
          mountPath: "/mnt/k10state"   
      volumes:
      - name: jobs-persistent-storage
        persistentVolumeClaim:
          claimName: jobs-pv-claim
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: logging-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: logging
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: logging
      run: logging-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: logging
        run: logging-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      initContainers:
      - name: upgrade-init
        securityContext:
          runAsUser: 0
          allowPrivilegeEscalation: true        
        image: gcr.io/kasten-images/upgrade:3.0.6
        imagePullPolicy: Always
        env:
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
        volumeMounts:
        - name: logging-persistent-storage
          mountPath: "/mnt/k10state"
      containers:
      - name: logging-svc        
        image: gcr.io/kasten-images/logging:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 2m
            memory: 40Mi
        ports:
        - containerPort: 8000
        - containerPort: 24224
          protocol: TCP
        - containerPort: 24225
          protocol: TCP
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
        volumeMounts:
        - name: logging-persistent-storage
          mountPath: "/mnt/k10state"
        - name: logging-configmap-storage
          mountPath: "/mnt/conf"   
      volumes:
      - name: logging-persistent-storage
        persistentVolumeClaim:
          claimName: logging-pv-claim
      - name: logging-configmap-storage
        configMap:
          name: fluentbit-configmap
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: metering-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: metering
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: metering
      run: metering-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: metering
        run: metering-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      initContainers:
      - name: upgrade-init
        securityContext:
          runAsUser: 0
          allowPrivilegeEscalation: true        
        image: gcr.io/kasten-images/upgrade:3.0.6
        imagePullPolicy: Always
        env:
          - name: MODEL_STORE_DIR
            value: /var/reports/
        volumeMounts:
        - name: metering-persistent-storage
          mountPath: /var/reports/
      containers:
      - name: metering-svc        
        image: gcr.io/kasten-images/metering:3.0.6
        imagePullPolicy: Always
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 90
          timeoutSeconds: 1
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: AGENT_CONFIG_FILE
            value: /var/ubbagent/config.yaml
          - name: AGENT_STATE_DIR
            value: "/var/reports/ubbagent"
        volumeMounts:
        - name: meter-config
          mountPath: /var/ubbagent
        - name: metering-persistent-storage
          mountPath: /var/reports/
      volumes:
        - name: meter-config
          configMap:
            name: k10-k10-metering-config
            items:
            - key: config
              path: config.yaml
        - name: metering-persistent-storage
          persistentVolumeClaim:
            claimName: metering-pv-claim
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: state-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: state
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: state
      run: state-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: state
        run: state-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: state-svc        
        image: gcr.io/kasten-images/state:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 2m
            memory: 30Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            value: "/tmp/k10store"
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: aggregatedapis-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: aggregatedapis
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: aggregatedapis
      run: aggregatedapis-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: aggregatedapis
        run: aggregatedapis-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: aggregatedapis-svc        
        image: gcr.io/kasten-images/aggregatedapis:3.0.6
        imagePullPolicy: Always
        args:
        - "--secure-port=10250"
        - "--cert-dir=/tmp/apiserver.local.config/certificates/"        
        resources:
          requests:
            cpu: 90m
            memory: 180Mi
        ports:
        - containerPort: 10250
        livenessProbe:
          tcpSocket:
            port: 10250
          timeoutSeconds: 5
          initialDelaySeconds: 300
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: config-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: config
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: config
      run: config-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: config
        run: config-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: config-svc        
        image: gcr.io/kasten-images/config:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 5m
            memory: 30Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: frontend-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: frontend
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: frontend
      run: frontend-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: frontend
        run: frontend-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: frontend-svc        
        image: gcr.io/kasten-images/frontend:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 1m
            memory: 40Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: kasten-io
  name: kanister-svc
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: kanister
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: k10
      release: k10
      component: kanister
      run: kanister-svc
  template:
    metadata:
      labels:
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
        component: kanister
        run: kanister-svc
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      serviceAccountName: k10-k10
      containers:
      - name: kanister-svc        
        image: gcr.io/kasten-images/kanister:3.0.6
        imagePullPolicy: Always        
        resources:
          requests:
            cpu: 1m
            memory: 30Mi
        ports:
        - containerPort: 8000
        livenessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          timeoutSeconds: 1
          initialDelaySeconds: 300
        readinessProbe:
          httpGet:
            path: /v0/healthz
            port: 8000
          initialDelaySeconds: 3
        env:
          - name: VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: version
          - name: MODEL_STORE_DIR
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: modelstoredirname
          - name: DATA_MOVER_IMAGE
            value: gcr.io/kasten-images/datamover:3.0.6
          - name: LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: loglevel
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: CONCURRENT_SNAP_CONVERSIONS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentSnapConversions
          - name: CONCURRENT_WORKLOAD_SNAPSHOTS
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: concurrentWorkloadSnapshots
          - name: K10_DATA_STORE_PARALLEL_UPLOAD
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreParallelUpload
          - name: K10_DATA_STORE_GENERAL_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralContentCacheSizeMB
          - name: K10_DATA_STORE_GENERAL_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreGeneralMetadataCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_CONTENT_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreContentCacheSizeMB
          - name: K10_DATA_STORE_RESTORE_METADATA_CACHE_SIZE_MB
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: k10DataStoreRestoreMetadataCacheSizeMB
          - name: K10_RELEASE_NAME
            value: k10
          - name: KANISTER_FUNCTION_VERSION
            valueFrom:
              configMapKeyRef:
                name: k10-config
                key: kanisterFunctionVersion
---
# Source: k10/templates/gateway.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
    component: gateway
  name: gateway
spec:
  replicas: 1
  selector:
    matchLabels:
      service: gateway
  template:
    metadata:
      labels:
        service: gateway
        component: gateway
        heritage: Helm
        helm.sh/chart: k10-3.0.6
        app.kubernetes.io/name: k10
        app.kubernetes.io/instance: k10
        app.kubernetes.io/managed-by: Helm
        app: k10
        release: k10
    spec:
      serviceAccountName: k10-k10
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      containers:
      - name: ambassador
        image: quay.io/datawire/ambassador:1.9.1
        resources:
          limits:
            cpu: 1
            memory: 400Mi
          requests:
            cpu: 200m
            memory: 100Mi
        env:
        - name: AMBASSADOR_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: AMBASSADOR_SINGLE_NAMESPACE
          value: "true"
        livenessProbe:
          httpGet:
            path: /ambassador/v0/check_alive
            port: 8877
          initialDelaySeconds: 30
          periodSeconds: 3
        readinessProbe:
          httpGet:
            path: /ambassador/v0/check_ready
            port: 8877
          initialDelaySeconds: 30
          periodSeconds: 3
      restartPolicy: Always
---
# Source: k10/templates/apiservice.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.actions.kio.kasten.io
  labels:
    apiserver: "true"
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  version: v1alpha1
  group: actions.kio.kasten.io
  groupPriorityMinimum: 2000
  service:
    namespace: kasten-io
    name: aggregatedapis-svc
  versionPriority: 10
  insecureSkipTLSVerify: true
---
# Source: k10/templates/apiservice.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.apps.kio.kasten.io
  labels:
    apiserver: "true"
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  version: v1alpha1
  group: apps.kio.kasten.io
  groupPriorityMinimum: 2000
  service:
    namespace: kasten-io
    name: aggregatedapis-svc
  versionPriority: 10
  insecureSkipTLSVerify: true
---
# Source: k10/templates/apiservice.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.vault.kio.kasten.io
  labels:
    apiserver: "true"
    heritage: Helm
    helm.sh/chart: k10-3.0.6
    app.kubernetes.io/name: k10
    app.kubernetes.io/instance: k10
    app.kubernetes.io/managed-by: Helm
    app: k10
    release: k10
spec:
  version: v1alpha1
  group: vault.kio.kasten.io
  groupPriorityMinimum: 2000
  service:
    namespace: kasten-io
    name: aggregatedapis-svc
  versionPriority: 10
  insecureSkipTLSVerify: true
